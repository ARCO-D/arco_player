# 简介
一个用c和javascript编写的mini音乐播放器

特点：无socket通信, 通过c语言加载配置信息、音乐列表等导出给js

# 使用说明
## 音乐文件路径
config.json文件中配置了存放音乐文件的路径: music_path

默认是在当前目录的music文件夹下

可以更改到如: E:\\qqmusic\\ 的路径来加载其他文件夹的音乐

更改后需要重启arco_player.exe生效


## 启动
*windows*

双击arco_player.exe 弹出命令行窗口,自动拉起浏览器

*linux*

编码转换问题导致中文乱码,待解决 暂不支持

## 权重配置

加权随机是我很想要的一个特性, 列表里的每首歌我又不是想均匀的都听, 因为在qq音乐上没看到这个功能, 所以我自己做了个

### 权重设置
界面启动后, 点击音乐列表右侧的按钮, 改变随机播放模式下的权值, 紫色的数字即标识当前的权值。 设为0时不会播放此歌曲

### 保存配置

因为阿尔可这个播放器实在太迷你, 就靠js和c撑着, 所以没法提供像样的数据持久化功能, 因此:

**您设置的权重配置会在刷新浏览器后丢失**

您知道的, 在没有NodeJs环境或者后端服务程序的情况下, javascript访问本地文件并不那么容易。

但阿尔可还是想办法提供了一种持久化保存的功能:

*需要劳烦作为使用者的您, 点击音乐列表上方'文件'形状的图标来下载权重配置

放置到本工程的js目录下*


# 源码结构说明
## css目录
music_controller.css 页面基础样式、音乐播放器样式

music_list.css 左侧音乐列表样式

## image目录
存放图标

## music目录
默认的音乐文件存放目录

## js目录
index.js 控制播放逻辑

music_list.js 控制音乐列表逻辑, 包括权重增加, 权重配置下载等

var.js c语言程序启动时生成,保存配置信息、音乐列表等

weight.js 保存音乐随机播放权重的js文件

## c
arcojson.c/h 一个非常轻量级的json库

main.c 解析配置文件、加载音乐列表的c源文件

build.sh 编译脚本

# 暂存问题
当前使用GBK编码来读取文件名, 对俄文、韩文等字符支持不好, 如果歌曲名中有此字符会显示异常&无法播放